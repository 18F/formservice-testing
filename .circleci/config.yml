# Circleci config
version: 2.1
defaults: &defaults
  docker: 
    - image: circleci/node:10.16.3
#aliases:
#  - &InstallNewman
#    name: Install npm and newman
#    command: "sudo npm install -g npm@5"
#    command: "sudo npm install -g newman"   

jobs:
   SmokeTest:
    <<: *defaults
    steps:
      - checkout
      - run: "sudo npm install -g npm@5"
      - run: "sudo npm install -g newman" 
      - run: "sudo npm install -g newman-reporter-htmlextra"     
      - run:
          name: "Run tests"
          command: newman run "formservice/collections/SmokeTest.json" -x -r htmlextra --reporter-htmlextra-logs
      - store_artifacts:
          path: /home/circleci/project/target/newmanreports
   
   

      
workflows:
  main:
    jobs:
      - SmokeTest
   
##
##  nightly:
##    triggers:
##      - schedule:
          # The cron format is:
          # min (0-59) hour (0-23) monthday (1-31) month (1-12) weekday (0-6, 0=Sun) - UTC time
##          cron: "10 14 * * *"
##          filters:
##            branches:
##              only: ScheduleRuns
##    jobs:
##      - FHEO-acceptance-test-Dev
