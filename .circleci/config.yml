# Circleci config
version: 2.1
jobs:
  build_machine:
    machine:
      image: ubuntu-2004:202010-01
    steps:
      - run:
          name: install NPM
          command: "sudo npm install -g npm"
      - run:
          name: install newman
          command: "sudo npm install -g newman"
  newman-collection-run:
    executor: newman/postman-newman-docker
    steps:
      - checkout
      - newman/newman-run:
          collection: formservice/collections/FHEOFormService.postman_collection.json
          environment: formservice/environments/EnvironmentVar.postman_environment.json
          iteration-data: formservice/data/FHEO-Service-TestData.csv
workflows:
  build_and_test:
    jobs:
      - build_machine
      - newman-collection-run
